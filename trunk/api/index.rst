API сайтов Безантракта
======================

Внутреннее API проекта (на данный момент используется только пользователями сайта в браузерах-клиентах).

Виды
====

Сервисы продажи билетов
-----------------------

Список свободных мест для продажи в событии
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.. automodule:: api.views.event.seats_and_prices

Работа с предварительном резервами (ПР) и созданными заказами
-------------------------------------------------------------

Попытка удалить предыдущий ПР в другом событии
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.. automodule:: api.views.order.prev_order_delete

Инициализация существующего ПР или создание нового пустого ПР
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.. automodule:: api.views.order.initialize

Работа с билетами в предварительном резерве
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.. automodule:: api.views.order.reserve

Изменение типа заказа в ПР с обновленеим реквизитов покупателя
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.. automodule:: api.views.order.change_type

Оформление ПР и создание заказа
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.. automodule:: api.views.order.processing

Сервисы онлайн-оплаты
---------------------

Проверка и обработка оплаты
^^^^^^^^^^^^^^^^^^^^^^^^^^^
Результат успешной или НЕуспешной онлайн-оплаты обрабатывается при открытии URL для их обработки и обрабатывается видом ``payment_handler``.

.. automodule:: api.views.payment.payment_handler

Предобработка оплаты в СургутНефтеГазБанке
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
В силу специфики оплаты в СургутНефтеГазБанке результаты оплаты предварительно обрабатываются видом ``sngb_proxy``, а затем происходит редирект на вид ``payment_handler``.

.. automodule:: api.views.payment.sngb_proxy
