.. _event_container:

Контейнеры
==========

При создании контейнера обязательно указывать один из 3-х его возможных типов:

+-------------------------------------+-----------------------+----------------------+
| Тип контейнера                      | Размер афиш           | Сотношение сторон    |
+=====================================+=======================+======================+
| **Большие вертикальные**            | ``312x540 px``        | Книжное              |
+-------------------------------------+-----------------------+----------------------+
| **Большие горизонтальные**          | ``822x425 px``        | Альбомное            |
+-------------------------------------+-----------------------+----------------------+
| **Маленькие вертикальные**          | ``213x255 px``        | Книжное              |
+-------------------------------------+-----------------------+----------------------+

Четвёртый контейнер *Маленькие горизонтальные* (размер афиш `233x185 px`, сотношение сторон альбомное) предусматривался изначально, но на данный момент не используется.

На данный момент на сайте предусмотрены следующие контейнеры для размещения афиш:

+-----------------------------------------+--------------------------+------------------------------------------------+
| Название контейнера                     | Тип контейнера           | Положение                                      |
+=========================================+==========================+================================================+
| **Большие вертикальные (слева)**        | Большие вертикальные     | Слева от содержимого сайта на широких экранах  |
+-----------------------------------------+--------------------------+------------------------------------------------+
| **Большие вертикальные (справа)**       | Большие вертикальные     | Справа от содержимого сайта на широких экранах |
+-----------------------------------------+--------------------------+------------------------------------------------+
| **Большие горизонтальные ("карусель")** | Большие горизонтальные   | Под текстовым поиском, справа от верхнего меню |
+-----------------------------------------+--------------------------+------------------------------------------------+
| **Маленькие вертикальные (VIP)**        | Маленькие вертикальные   | Внутри страницы (блок "**Рекомендуем**")       |
+-----------------------------------------+--------------------------+------------------------------------------------+
| **Маленькие вертикальные**              | Маленькие вертикальные   | Внутри страницы (обычный блок)                 |
+-----------------------------------------+--------------------------+------------------------------------------------+

Список контейнеров
------------------

Действия с выбранными контейнерами
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

* удалить

Столбцы в таблице контейнеров
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

* **Название**
* **Псевдоним**
* **Тип контейнера**
* **Публикация** - опубликован контейнер или нет.
* **Порядок**

Страница редактирования контейнеров
-----------------------------------

Атрибуты контейнеров
^^^^^^^^^^^^^^^^^^^^

* **Название**

  Всего не более 60-65 символов.

* **Псевдоним**

  Название в латиннице (заполняется автоматически), можно редактировать после ввода.

* **Тип контейнера** - выбор типа контейнера из предложенных вариантов.

* **Порядок** - порядковый номер контейнреа (влияет только на порядок отображения контейнеров в этом разделе админ-панели).

* **Ширина афиши** и **высота афиши** - напоминание о размерах изоражений для добавления в конкретный контейнер.

##########################################
Привязка афиш группы/события к контейнерам
##########################################

В таблице выводятся все афиши в конкретном контейнере, события или группы которых актуальны на данный момент:

* **Порядок** - порядковый номер афиши в выбранном контейнере.
* **Дата и время события**
* **Афиша** - выбор файла афиши для загрузки и вывод загруженной афиши.

Маленькие вертикальные афиши нужно в любом случае добавлять:

* для всех опубликованных групп,
* для всех единичных событий, не принадлежащих группам.

Афиши в этом контейнере используются для вывода событий при их фильтрации на сайте (по дате в календаре, категории, залу, в текстовом поиске), а также для генерации электронных PDF-билетов. При отсутствии афиши будет выводиться изображение-заглушка с логотипом Безантракта.

Ссылки с афиш работают следующим образом:

* Афиша события ведёт на страницу этого события.
* Афиша группы ведёт на самое раннее на данный момент актуальное событие, привязанное к этой группе.

Если на данный момент все события в группе уже прошли, а новые ещё не добавлены, *афиша группы в любом случае НЕ выводится на сайте*. Поэтому группы можно постоянно оставлять опубликованными (особенно, если в них периодически создаются похожие повторяющиеся события).

Если порядковые номера для показа афиш в одном контейнере одинаковые (например, ``1``) - афиши сортируются по дате/времени события.

.. only:: dev

  Модели
  ------

  Контейнеры
  ^^^^^^^^^^
  .. autoclass:: bezantrakta.event.models.EventContainer

  Привязка афиш группы/события к контейнерам
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  Афиши в контейнерах привязываются к конкретным событиям с помощью модели ``EventContainerBinder``, которая связывает модель ``Event`` с моделью ``EventContainer``, используя связь "*многие-ко-многим*".

  .. autoclass:: bezantrakta.event.models.EventContainerBinder

  Процессор контекста
  -------------------
  Афиши событий, размещённые в больших контейнерах (и горизонтальных, и вертикальных) выводятся в основном шаблоне сайта с помощью процессора контекста.

  .. automodule:: bezantrakta.event.context_processors.big_containers
